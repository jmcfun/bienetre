<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistiques d'Humeur</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/sidepanel.css">
    <link rel="stylesheet" href="css/suggestions.css">
</head>
<body>
    <div class="container">
        <!-- Modal d'exportation -->
        <div id="exportModal" class="modal">
            <div class="modal-content">
                <h3>Exporter les donn√©es</h3>
                <div class="export-options">
                    <div class="option-group">
                        <label>Format</label>
                        <select id="exportFormat">
                            <option value="csv">CSV (Excel)</option>
                            <option value="json">JSON</option>
                            <option value="txt">Texte simple</option>
                        </select>
                    </div>
                    <div class="option-group">
                        <label>P√©riode</label>
                        <select id="exportPeriod">
                            <option value="all">Tout l'historique</option>
                            <option value="year">Derni√®re ann√©e</option>
                            <option value="month">Dernier mois</option>
                            <option value="week">Derni√®re semaine</option>
                        </select>
                    </div>
                </div>
                <div class="modal-actions">
                    <button id="cancelExport" class="secondary-btn">Annuler</button>
                    <button id="confirmExport" class="primary-btn">Exporter</button>
                </div>
            </div>
        </div>

        <div id="debug" style="display: none;"></div>
        <header>
            <h1>Votre Journal d'Humeur</h1>
        </header>

        <main>
            <!-- Navigation par onglets -->
            <nav class="tab-navigation">
                <button class="tab-btn home-btn" data-tab="home">
                    <span class="icon">üè†</span> Accueil
                </button>
                <button class="tab-btn" data-tab="basic-stats">
                    <span class="icon">üìä</span> Statistiques
                </button>
                <button class="tab-btn" data-tab="premium-features">
                    <span class="icon">‚ú®</span> Premium
                </button>
            </nav>
            
            <!-- Conteneur des onglets -->
            <div class="tab-content">
                <div id="home" class="tab-pane">
                    <!-- Contenu de l'accueil -->
                </div>
                <div id="basic-stats" class="tab-pane">
                    <section class="stats-section">
                        <h2>Statistiques de Base</h2>
                        <p class="stats-info">Statistiques des 7 derniers jours</p>
                        
                        <div class="basic-charts">
                            <div class="mood-trends">
                                <h3>√âvolution de l'humeur</h3>
                                <canvas id="moodChart"></canvas>
                            </div>

                            <div class="energy-stress">
                                <h3>√ânergie et Stress</h3>
                                <canvas id="energyStressChart"></canvas>
                            </div>

                            <div class="lifestyle-metrics">
                                <h3>Facteurs de Bien-√™tre</h3>
                                <canvas id="lifestyleChart"></canvas>
                            </div>
                        </div>

                        <div class="recent-notes">
                            <h3>Notes R√©centes</h3>
                            <div class="notes-list">
                                <!-- Rempli dynamiquement -->
                            </div>
                        </div>
                    </section>
                </div>
                <div id="premium-features" class="tab-pane">
                    <section class="premium-section">
                        <h2>Analyses Avanc√©es <span class="premium-badge">Premium</span></h2>
                        <div class="premium-content">
                            <div class="premium-insights">
                                <div class="prediction-card premium-feature">
                                    <h3>Pr√©diction d'Humeur</h3>
                                    <div class="prediction-content">
                                        <div class="prediction-header">
                                            <div class="prediction-mood">
                                                <span class="prediction-label">Demain :</span>
                                                <span class="prediction-value"></span>
                                            </div>
                                            <div class="prediction-confidence">
                                                <span class="confidence-label">Confiance :</span>
                                                <div class="confidence-bar">
                                                    <div class="confidence-fill"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="weather-info"></div>
                                    </div>
                                </div>
                                
                                <div class="correlation-card premium-feature">
                                    <h3>Facteurs d'Influence</h3>
                                    <ul class="factors-list"></ul>
                                </div>
                                
                                <div class="suggestions-section premium-feature">
                                    <div class="suggestions-header">
                                        <h3>Suggestions Personnalis√©es</h3>
                                        <div class="source-badges">
                                            <span class="source-badge who">OMS</span>
                                            <span class="source-badge nhs">NHS</span>
                                        </div>
                                    </div>

                                    <div class="suggestions-disclaimer">
                                        <div class="disclaimer-icon">‚ö†Ô∏è</div>
                                        <p class="disclaimer-text"></p>
                                    </div>

                                    <div class="suggestions-list">
                                        <!-- Les suggestions seront inject√©es ici dynamiquement -->
                                    </div>

                                    <div class="suggestions-footer">
                                        <button class="refresh-suggestions">
                                            <span class="icon">üîÑ</span>
                                            Actualiser les suggestions
                                        </button>
                                        <div class="last-updated">
                                            Derni√®re mise √† jour: <span class="update-time"></span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Section Objectifs -->
                                <div class="goals-card premium-feature">
                                    <h3>Objectifs de Bien-√™tre</h3>
                                    <div class="goals-content">
                                        <div class="goals-list">
                                            <!-- Liste des objectifs -->
                                        </div>
                                        <button class="add-goal-btn">
                                            <span class="icon">‚ûï</span> Nouvel Objectif
                                        </button>
                                    </div>
                                </div>

                                <!-- Modal Nouvel Objectif -->
                                <div id="goalModal" class="modal">
                                    <div class="modal-content">
                                        <h3>D√©finir un Nouvel Objectif</h3>
                                        <form id="goalForm">
                                            <div class="form-group">
                                                <label>Type d'objectif</label>
                                                <select id="goalType" required>
                                                    <option value="mood">Humeur g√©n√©rale (1=Tr√®s mal, 5=Tr√®s bien)</option>
                                                    <option value="activity">Activit√© physique (1=S√©dentaire, 5=Tr√®s actif)</option>
                                                    <option value="sleep">Qualit√© du sommeil (1=Mauvaise, 5=Excellente)</option>
                                                    <option value="social">Interactions sociales (1=Isol√©, 5=Tr√®s social)</option>
                                                    <option value="stress">Niveau de stress (1=Tr√®s stress√©, 5=D√©tendu)</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label>Niveau √† atteindre</label>
                                                <div class="goal-target-container">
                                                    <input type="range" id="goalTarget" min="1" max="5" step="1" required>
                                                    <div class="goal-target-labels">
                                                        <span>1</span>
                                                        <span>2</span>
                                                        <span>3</span>
                                                        <span>4</span>
                                                        <span>5</span>
                                                    </div>
                                                    <div class="goal-target-description"></div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Date limite</label>
                                                <input type="date" id="goalDeadline" required>
                                            </div>
                                            <div class="goal-description">
                                                <p class="goal-explanation"></p>
                                            </div>
                                            <div class="modal-actions">
                                                <button type="button" class="secondary-btn" id="cancelGoal">Annuler</button>
                                                <button type="submit" class="primary-btn">Cr√©er</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>

                                <!-- Section Rappels -->
                                <div class="reminders-card premium-feature">
                                    <h3>Rappels</h3>
                                    <div class="reminders-content">
                                        <div class="reminders-list">
                                            <!-- Liste des rappels -->
                                        </div>
                                        <button class="add-reminder-btn">
                                            <span class="icon">‚è∞</span> Nouveau Rappel
                                        </button>
                                    </div>
                                </div>

                                <!-- Modal Nouveau Rappel -->
                                <div id="reminderModal" class="modal">
                                    <div class="modal-content">
                                        <h3>Configurer un Rappel</h3>
                                        <form id="reminderForm">
                                            <div class="form-group">
                                                <label>Configuration du rappel</label>
                                                <div class="reminder-config">
                                                    <div class="time-config">
                                                        <label>Heure sp√©cifique</label>
                                                        <input type="time" id="reminderTime">
                                                        <small>Laissez vide pour un rappel imm√©diat</small>
                                                    </div>
                                                    
                                                    <div class="date-config">
                                                        <label>Date (optionnelle)</label>
                                                        <input type="date" id="reminderDate">
                                                        <small>Pour un rappel √† une date pr√©cise</small>
                                                    </div>
                                                    
                                                    <div class="frequency-config">
                                                        <label>R√©p√©ter tous les</label>
                                                        <div class="frequency-inputs">
                                                            <input type="number" id="frequencyValue" min="1" placeholder="Nombre">
                                                            <select id="frequencyUnit">
                                                                <option value="minutes">minutes</option>
                                                                <option value="hours">heures</option>
                                                                <option value="days">jours</option>
                                                                <option value="months">mois</option>
                                                            </select>
                                                        </div>
                                                        <small>Laissez vide pour un rappel unique</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Message personnalis√©</label>
                                                <input type="text" id="reminderMessage" placeholder="Comment allez-vous ?">
                                            </div>
                                            <div class="modal-actions">
                                                <button type="button" class="secondary-btn" id="cancelReminder">Annuler</button>
                                                <button type="submit" class="primary-btn">Cr√©er</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="export-section premium-feature">
                                <h3>Exportation des Donn√©es</h3>
                                <button id="openExportModal" class="primary-btn">
                                    <span class="icon">üì•</span> Exporter l'historique
                                </button>
                            </div>
                        </div>
                    </section>

                    <div id="premiumStatus" class="premium-status">
                        <span class="status-icon">‚≠ê</span>
                        <span class="status-text">Version gratuite</span>
                        <div class="dev-controls">
                            <div class="dev-mode-switch">
                                <label class="switch">
                                    <input type="checkbox" id="devModeToggle">
                                    <span class="slider round"></span>
                                </label>
                                <span class="dev-mode-label">Mode Essai</span>
                            </div>
                            <div class="premium-mode-switch">
                                <label class="switch">
                                    <input type="checkbox" id="premiumModeToggle">
                                    <span class="slider round"></span>
                                </label>
                                <span class="dev-mode-label">Mode Premium</span>
                            </div>
                            <button id="resetTrialBtn" class="dev-btn">R√©initialiser Essai</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
        </footer>
    </div>
    <script src="vendor/chart.js"></script>
    <script type="module" src="js/sample-data.js"></script>
    <script type="module" src="js/premium-features.js"></script>
    <script type="module" src="js/premium.js"></script>
    <script type="module" src="js/sidepanel.js"></script>
</body>
</html> 